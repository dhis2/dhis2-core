# DHIS2-19572

Analyzing tracker GET request logs from nginx.

## Run Locally

```sh
docker compose --profile logs up
```

## Nginx Config

Test the nginx config

```sh
docker compose nginx nginx -t
```

Reload the nginx config

```sh
docker compose nginx nginx -s reload
```

Stream request logs

```sh
docker compose exec nginx tail -f /var/log/nginx/tracker_access.log
```

## Access log pattern

nginx does not support logging as JSON well. There are some workarounds but in order to not put any
extra load or odd logic into implementations nginx configurtations we opted to log using a custom
pattern. We then post process the logs

* sanitize query parameters from PII

https://www.elastic.co/docs/explore-analyze/query-filter/tools/grok-debugger

http://localhost:5601/app/dev_tools#/grokdebugger

